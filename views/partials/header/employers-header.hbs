<header role="banner">

  <div class="preheader" id="preheader">
    <div class="hexes">
      <div class="hex"><a href="http://auburn.edu"><img src="assets/images/AU-emblem.png"></a></div>
    </div>
    <h1><a href="./employers">Career Center</a></h1>
  </div>
  
  
  <nav id="nav" class="header nav-collapse">
    <div class="nav-controller" id="hamburger">
      <i class="icon-navicon"></i>
    </div>
    <div class="nav-wrapper">
      <ul>
        <li id="about-us" class="hover about-us about-us--mobile">
          <a href="employers/aboutus/">About Us</a>
          <ul>
            <li data-menu="about-us"><a href="employers/aboutus/">Office Info</a></li>
            <li data-menu="about-us"><a href="employers/aboutus/staff.html">Staff</a></li>
            <li data-menu="about-us"><a href="employers/aboutus/plan-your-visit.html">Plan Your Visit</a></li>
            <li data-menu="about-us"><a href="employers/aboutus/campus-partners.html">Campus Partners</a></li>
          </ul>
        </li>
        <li class="recruiting">
          <a href="employers/ocr.html">Recruiting</a>
          <ul>
            <li data-menu="recruiting"><a href="#">Job Postings</a></li>
            <li data-menu="recruiting"><a href="events">Career Events</a></li>
            <li data-menu="recruiting"><a href="#">On-Campus Interviewing</a></li>
          </ul>
        </li>
        <li id="student-employment">
          <a href="employers/studentemployment/index.html">Part-Time Employment</a>
          <ul>
            <li data-menu="student-employment"><a href="employers/student-employment/on-campus.html">On-Campus</a></li>
            <li data-menu="student-employment"><a href="employers/student-employment/off-campus.html">Off-Campus</a></li>
            <li data-menu="student-employment"><a href="employers/events/seoty.html">Student Employment Awards</a></li>
          </ul>
        </li>
        <li>
          <a href="employers/events/">Events</a>
        </li>
        <li class="about-us">
          <a href="employers/aboutus/">About Us</a>
          <ul>
            <li data-menu="about-us"><a href="employers/aboutus/">Office Info</a></li>
            <li data-menu="about-us"><a href="employers/aboutus/staff.html">Staff</a></li>
            <li data-menu="about-us"><a href="employers/aboutus/plan-your-visit.html">Plan Your Visit</a></li>
            <li data-menu="about-us"><a href="employers/aboutus/campus-partners.html">Campus Partners</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>
  
  <nav class="postheader" id="postheader">
    <ul>
        <li><a href="http://www.auburn.edu/main/sitemap.php">A-Z Index</a></li>
        <li><a href="http://www.auburn.edu/map">Map</a></li>
        <li><a href="http://www.auburn.edu/main/auweb_campus_directory.html">People Finder</a></li>
        <li><a href="http://auaccess.auburn.edu/">AU Access</a></li>
        <li>
            <form action="http://search.auburn.edu" method="get">
                <input type="search" placeholder="Search Auburn" name="q">
            </form>
        </li>
    </ul>
  </nav>
</header>

<!-- Positioning the nav -->
<script>
  var preheader, nav, postheader;
  window.onscroll = function () {
    if(preheader === undefined) preheader = document.getElementById('preheader')
    if(preheader === undefined) return
    
    if(nav === undefined) nav = document.getElementById('nav')
    if(nav === undefined) return
    
    if(postheader === undefined) postheader = document.getElementById('postheader')
    if(postheader === undefined) return  
    
    
    if(preheader.getBoundingClientRect().bottom <= 0 && !nav.classList.contains('fixed') && window.innerWidth >= 768) {
      nav.classList.add('fixed') 
      postheader.classList.add('absolute')
    } else if (preheader.getBoundingClientRect().bottom > 0 && nav.classList.contains('fixed') && window.innerWidth >= 768) {
      nav.classList.remove('fixed')
      postheader.classList.remove('absolute')
    } else if (preheader.getBoundingClientRect().bottom <= 0 && nav.children[0].getBoundingClientRect().top <= 0 && !nav.classList.contains('fixed')) {
      nav.classList.add('fixed') 
    } else if (preheader.getBoundingClientRect().bottom > 0 && nav.classList.contains('fixed')) {
      nav.classList.remove('fixed') 
    } 
    
    if(postheader.getBoundingClientRect().top <= 0 + 30 && !nav.classList.contains('bordered') && window.innerWidth >= 768) { 
      nav.classList.add('bordered')
    } else if (postheader.getBoundingClientRect().top > 0 + 30  && nav.classList.contains('bordered') && window.innerWidth >= 768) {
      nav.classList.remove('bordered') 
    } else if (nav.children[0].getBoundingClientRect().top <= 0 + 30 && !nav.classList.contains('bordered') && window.innerWidth < 768) {
      nav.classList.add('bordered') 
    } else if (nav.children[0].getBoundingClientRect().top > 0 + 30 && nav.classList.contains('bordered') && window.innerWidth < 768) {
      nav.classList.remove('bordered') 
    }
    
    
    if(nav.children[1].classList.contains('mobile-nav--active') && !nav.classList.contains('fixed')) {
      nav.classList.add('fixed'); 
    }
  }
</script>
<!-- Mobile menu -->
<script>
  var hamburger = document.getElementById('hamburger')
  hamburger.addEventListener('click', function () {
    var navWrapper = document.getElementById('nav').children[1]
     
    if(hamburger === undefined) hamburger = document.getElementById('hamburger')
    if(hamburger === undefined) return
    
    if (hamburger.classList.contains('nav-controller--active'))
      hamburger.classList.remove('nav-controller--active')
    else hamburger.classList.add('nav-controller--active')
    
    if(navWrapper.classList.contains('mobile-nav--active'))
      navWrapper.classList.remove('mobile-nav--active')
    else 
      navWrapper.classList.add('mobile-nav--active')
  })
  window.addEventListener('resize', function () {
    var navWrapper = document.getElementById('nav').children[1]
    
    if(window.innerWidth >= 768 && navWrapper.classList.contains('mobile-nav--active'))
      navWrapper.classList.remove('mobile-nav--active')
  })
  
  var submenus = document.getElementById('nav').getElementsByClassName('hover')
  function touchHandler(e) {
    
    e.preventDefault()
    
    console.log(this.classList)
    
    if(this.classList.contains('hover')) {
      if(this.classList.contains('hover--active')) {
        this.classList.add('hover--active')
      }
    }
    else if(!this.classList.contains('hover')) {

      console.log('no hover')
      console.log(this)
      var menu = this.parentElement.parentElement

      if(menu.classList.contains('hover--active')) e.target.click()
    }
  }
  for(var i = 0; i < submenus.length; i++) {
    submenus[i].addEventListener('touchstart', touchHandler, true)
    
    for(var j = 0; j < submenus[i].children[1].children.length; j++) {
      submenus[i].children[1].children[j].addEventListener('touchstart', touchHandler, true) 
    }
  }
  
</script>
<style>
  nav.header .nav-wrapper ul li,
  nav.header .nav-wrapper.mobile-nav--active ul li {
     width: 25%;
  }
  nav.header ul li.hover--active:last-of-type > ul, nav.header ul li:hover:last-of-type > ul {
    left: -300%;
  }
  nav.header ul li.hover--active > ul, nav.header ul li:hover > ul {
    width: 400%; 
  }
</style>